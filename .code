#include <VKey.h>


 VKey keypad(A1, VKey::FIVE );
 int guess[4];
 int correct[4]={1,2,3,4};
 int counter=0;
 int buzzer=5;
 int counter2=0;
 
 void setup()
 {
   Serial.begin(9600);
   pinMode(buzzer,OUTPUT); 
 }
 
 void loop(){
   VKey::eKeynum k;
   keypad.checkKeys(k);
   if(k==12){
     delay(200);
     for(int i=0;i<4;i++){
       Serial.println(guess[i]); 
     }
     if(correct[0]==guess[0]&&correct[1]==guess[1]&&correct[2]==guess[2]&&correct[3]==guess[3]){
        guess[0] = 0 ;
        guess[1] = 0 ;
        guess[2] = 0 ;
        guess[3] = 0 ;
       Serial.println("Access granted.");
       for(int j=0;j<7;j++){
         analogWrite(buzzer,128);
         delay(75);
         analogWrite(buzzer,0);
         delay(50);
       }
     }
     else{
       Serial.println("Incorrect PIN. Try again.");
       analogWrite(buzzer,128);
       delay(75);
       analogWrite(buzzer,0);
       counter2++;
       if(counter2==3){
         analogWrite(buzzer,128);
         delay(3000);
         analogWrite(buzzer,0);
       }
     }
     counter=0;
   }
   else if(k!=0){
     guess[counter]=k;
     counter++;
     Serial.print("Got key: ");
     Serial.println(k);
     delay(500);
   }
 }
